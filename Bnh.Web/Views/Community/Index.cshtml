@model Dictionary<string, IEnumerable<CommunityViewModel>>
@{
    ViewBag.Title = "Calgary Communities";
    ViewBag.Description = "Pick a community";
}

@section Scripts
{
    <script>require(["community-index"]);</script>
}

@if (Context.User.IsInRole("content_manager"))
{
    <sup class="alter">@Html.ActionLink("create new", "Create", null, new { title = "Create new community" })</sup>
}

<div class="row">
    <div class="span3"></div>
    <div class="span8 center">
       
    </div>
</div>

<div class="row" style="height:850px">
    <div class="span"></div>
    <div class="span3">
        <fieldset>
            <legend>Filter <a id="filterLegend" href="#">[show]</a></legend>
            @Html.Partial("CommunityFilterPartial")
        </fieldset>
    </div>

    <div class="slider">

        <div>

            <div class="slide">
                @foreach(var zone in Model)
                {
                <div class="span2">
                    <div class="zone-header">@zone.Key</div>
                    <div>
                        @foreach(var community in zone.Value)
                        {
                        <div class="zone-community">
                            @if (Context.User.IsInRole("content_manager"))
                            {
                            <sup class="alter"><a>x</a></sup>
                            }
                            <a class="community" href="@community.DetailsUrl">@community.Community.Name</a>
                        </div>
                        }
                    </div>
                 </div>
                }
                <div class="anchor">
                     <a href="#" data-bind="click: onToggleSlide.bind($root)">Go to map view --></a>
                </div>
            </div>

            <div class="slide">
                <div class="span">list view</div>
                <div id="mapContainer" class="span8"></div>
                <div class="span8 initially-hidden-map">
                    <div id="mapCanvas" data-mapcontainer="mapContainer" style="width: 100%; height: 800px;" ></div>
                </div>
            </div>

        </div>
    </div>
</div>

